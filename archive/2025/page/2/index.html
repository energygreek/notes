
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://energygreek.github.io/notes/archive/2025/page/2/">
      
      
        <link rel="prev" href="../../../../tags/">
      
      
        <link rel="next" href="../../../2024/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS 订阅" href="../../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="已更新内容的 RSS 订阅" href="../../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>2025 - Some Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2025" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="Some Notes" class="md-header__button md-logo" aria-label="Some Notes" data-md-component="logo">
      
  <img src="../../../../assets/bird.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Some Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2025
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="gray" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../tags/" class="md-tabs__link">
        
  
  
    
  
  Tags

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  归档

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Some Notes" class="md-nav__button md-logo" aria-label="Some Notes" data-md-component="logo">
      
  <img src="../../../../assets/bird.png" alt="logo">

    </a>
    Some Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yt-dlpqqmv" class="md-nav__link">
    <span class="md-ellipsis">
      使用yt-dlp工具下载QQ音乐的MV
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tailscale" class="md-nav__link">
    <span class="md-ellipsis">
      tailscale 使用记录
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      指数和对数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adb-remote-forward" class="md-nav__link">
    <span class="md-ellipsis">
      adb remote forward
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      吉他学习
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ways-of-generating-compile-command-json-file" class="md-nav__link">
    <span class="md-ellipsis">
      ways of generating compile command json file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#difference-of-lxc-container-and-docker-container" class="md-nav__link">
    <span class="md-ellipsis">
      difference of lxc container and docker container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      Linux 文本处理三剑客
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2022
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2019/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yt-dlpqqmv" class="md-nav__link">
    <span class="md-ellipsis">
      使用yt-dlp工具下载QQ音乐的MV
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tailscale" class="md-nav__link">
    <span class="md-ellipsis">
      tailscale 使用记录
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      指数和对数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adb-remote-forward" class="md-nav__link">
    <span class="md-ellipsis">
      adb remote forward
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      吉他学习
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ways-of-generating-compile-command-json-file" class="md-nav__link">
    <span class="md-ellipsis">
      ways of generating compile command json file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#difference-of-lxc-container-and-docker-container" class="md-nav__link">
    <span class="md-ellipsis">
      difference of lxc container and docker container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      Linux 文本处理三剑客
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="2025">2025<a class="headerlink" href="#2025" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-05-07 00:00:00+00:00">2025年5月7日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="yt-dlpqqmv"><a class="toclink" href="../../../../2025/05/07/yt-dlp-downloads-qq-mv/">使用yt-dlp工具下载QQ音乐的MV</a></h2>
<h3 id="m3u8"><a class="toclink" href="../../../../2025/05/07/yt-dlp-downloads-qq-mv/#m3u8">获取m3u8文件</a></h3>
<ul>
<li>Right click -&gt; Inspect -&gt; Network tab.</li>
<li>Enter m3u in the filter box.</li>
<li>Refresh the page, then click play on the video.</li>
<li>Several results will pop up in the network tab, in this case 15Mps.m3u8 was the 4k version. There's lower quality (10/5Mps) ones as well.</li>
<li>Right click on the 15Mps.m3u8 line, copy the url.</li>
</ul>
<h3 id="_1"><a class="toclink" href="../../../../2025/05/07/yt-dlp-downloads-qq-mv/#_1">下载</a></h3>
<div class="highlight"><pre><span></span><code>yt-dlp  https://apd-e884a42ebcb1819c8e185bdd22d6b32d.v.smtcdns.com/mv.music.tc.qq.com/AI85i7JvkmyF4poFqhirDtuEnNIwyQjQKiMDd0TFbAjw/6371017979FE2EAD13F0216756673D8F64FF084085A30F1293F38C7A31471243BB1F9358EDD23833D48FCB2D2AC4B515ZZqqmusic_default/qmmv_0b6biyaaeaaapqaa3pcdpjrfirqaajdaaasa.f9944.m3u8
</code></pre></div>
<h3 id="_2"><a class="toclink" href="../../../../2025/05/07/yt-dlp-downloads-qq-mv/#_2">提取音频</a></h3>
<p><code>-ss 14s</code> 跳过了MV开头的剧情
<div class="highlight"><pre><span></span><code>ffmpeg -i video_audio.mp4  -map 0:1 -ss 14s   -c:a copy  audio.m4a
</code></pre></div>
使用mediainfo查看音频质量，比特率192kbps，对比其它音乐文件，压缩率挺高的。
<div class="highlight"><pre><span></span><code>mediainfo output.m4a | grep &quot;Bit rate&quot; 
Bit rate mode                            : Constant
Bit rate                                 : 192 kb/s
</code></pre></div></p>
<h3 id="_3"><a class="toclink" href="../../../../2025/05/07/yt-dlp-downloads-qq-mv/#_3">参考</a></h3>
<p>https://www.reddit.com/r/DataHoarder/comments/1ab8812/how_to_download_blob_embedded_video_on_a_website/</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-30 00:00:00+00:00">2025年4月30日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tailscale"><a class="toclink" href="../../../../2025/04/30/tailscale-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/">tailscale 使用记录</a></h2>
<p>tailscale 免费最大提供10个节点，足够个人使用。在如今大内网的时代，非常方便组建子网，实现家中和公司互联互通。</p>
<h3 id="derp"><a class="toclink" href="../../../../2025/04/30/tailscale-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#derp">添加DERP节点</a></h3>
<p>如果两个节点有一个有公网IP, 或者能打洞（NAT1. NAT2），那么两个节点可以直连，速度很快。否则要通过DERP节点转发，但是tailscale在大陆没有DERP节点，HK的DERP节点都有300+的延迟，完全没法用。 所以只能自己搭建或租赁一个在大陆的私人搭建的节点。</p>
<h3 id="_1"><a class="toclink" href="../../../../2025/04/30/tailscale-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#_1">出口节点</a></h3>
<p>出口节点A是流量可以从这个节点出去，比如节点B可以从A查询IP地址时，显示的ip是节点A的公网ip 而不是B的。</p>
<h4 id="_2"><a class="toclink" href="../../../../2025/04/30/tailscale-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#_2">转发到出口节点</a></h4>
<p>在B节点上设置流量都从节点A出去
tailscale up --exit-node=<A-Exit-Node-IP></p>
<h4 id="_3"><a class="toclink" href="../../../../2025/04/30/tailscale-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#_3">添加转发例外</a></h4>
<p>启动转发后，所有流量都会从出口节点走。如果单机就没事，但是局域网多台电脑需要交互，例如从局域网主机C访问主机B, 由于主机B的流量都从节点A出去了，会导致主机C收不到请求答复。结果是C 无法ping B, C也不能ssh登录B。 所以要添加例外</p>
<p>将来自本地局域网主机C的流量不被转发到出口节点。例如路由器的子网是192.168.10.0/24，主机C是192.168.10.111, 本机ip是192.168.10.100
<div class="highlight"><pre><span></span><code><span class="c1"># ip rule add to &lt;your-local-network&gt; lookup main</span>
ip<span class="w"> </span>rule<span class="w"> </span>add<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.10.111/32<span class="w"> </span>lookup<span class="w"> </span>main
</code></pre></div></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-27 00:00:00+00:00">2025年4月27日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="../../../../2025/04/27/%E6%8C%87%E6%95%B0%E5%92%8C%E5%AF%B9%E6%95%B0/">指数和对数</a></h2>
<p><img alt="指数和对数" src="../../../../img/log.png" />
<img alt="exponents" src="../../../../img/exponents.png" />
<img alt="logarithm" src="../../../../img/logarithm.png" /></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-24 00:00:00+00:00">2025年4月24日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="adb-remote-forward"><a class="toclink" href="../../../../2025/04/24/adb-remote-forward/">adb remote forward</a></h2>
<p>连接安卓设备后，通过adb连接实现远程桌面的方法</p>
<ol>
<li>首先跳板机连接安卓，这里是wifi方式，adb connect 192.168.0.32:5555</li>
<li>启动隧道转发，ssh -vCN -L5038:localhost:5037 -L27183:localhost:27183 adb@SERVER -p PORT</li>
<li>在另一台设备上使用scrcpy远程安卓 
<div class="highlight"><pre><span></span><code>user@client:~$ export ADB_SERVER_SOCKET=tcp:localhost:5038
user@client:~$ scrcpy --force-adb-forward -b2M -m800 --max-fps=15
</code></pre></div></li>
</ol>
<h3 id="adb"><a class="toclink" href="../../../../2025/04/24/adb-remote-forward/#adb">对于不能有线连接设备的情况，通过下面命令开启无线adb</a></h3>
<p>在adb shell中操作</p>
<div class="highlight"><pre><span></span><code># This line enables adbd to run as tcpip by default
root@device:~$ echo &quot;service.adb.tcp.port=5555&quot; &gt;&gt; /system/build.prop

# This line enables adbd to accept input from keyboard &amp; mouse using scrcpy
root@device:~$ echo &quot;persist.security.adbinput=1&quot; &gt;&gt; /system/build.prop

# This line enables adbd
root@device:~$ echo &quot;persist.service.adb.enable=1&quot; &gt;&gt; /system/build.prop

# After that, just reboot the DEVICE
root@device:~$ reboot
</code></pre></div>
<h3 id="_1"><a class="toclink" href="../../../../2025/04/24/adb-remote-forward/#_1">参考</a></h3>
<p>https://psabadac.medium.com/ssh-adb-9d92c676d8c0</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-26 00:00:00+00:00">2025年3月26日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="../../../../2025/03/26/%E5%90%89%E4%BB%96%E5%AD%A6%E4%B9%A0/">吉他学习</a></h2>
<h3 id="10"><a class="toclink" href="../../../../2025/03/26/%E5%90%89%E4%BB%96%E5%AD%A6%E4%B9%A0/#10">最常用的10个和弦</a></h3>
<p><img alt="Em" src="../../../../img/guitar/Em.png" /><br />
食指放在5弦的第二品上，中指放在4弦的第二品上, 或用中指放在5弦的第二品上，无名指放在4弦的第二品上</p>
<p><img alt="D" src="../../../../img/guitar/D.png" /><br />
食指放在3弦的第二品上，中指放在1弦的第二品上，无名指放在2弦的第三品上</p>
<p><img alt="C" src="../../../../img/guitar/C.png" /><br />
食指放在2弦的第一品上，中指放在4弦的第二品上，无名指放在5弦的第三品上</p>
<p><img alt="G" src="../../../../img/guitar/G.png" /><br />
食指放在5弦的第二品上，中指放在6弦的第三品上，无名指放在1弦的第三品上, 或中指放在5弦的第二品上，无名指放在6弦的第三品上，小指放在1弦的第三品上</p>
<p><img alt="Am" src="../../../../img/guitar/Am.png" /><br />
食指放在2弦的第一品上，中指放在4弦的第二品上，无名指放在3弦的第二品上</p>
<p><img alt="F" src="../../../../img/guitar/F.png" /><br />
食指大横按在一品上，中指放在3弦的第二品上，无名指放在5弦第三品上，小指放在4弦第三品上<br />
<img alt="F" src="../../../../img/guitar/F-1.png" /><br />
<img alt="F" src="../../../../img/guitar/F-2.png" /></p>
<p><img alt="E" src="../../../../img/guitar/E.png" /><br />
食指指放在3弦的第一品上，中指放在5弦第二品上，无名指放在4弦第二品上</p>
<p><img alt="Dm" src="../../../../img/guitar/Dm.png" /><br />
食指放在1弦第一品上，中指放在3弦第二品上，无名指放在2弦第三品上</p>
<p><img alt="A" src="../../../../img/guitar/A.png" /><br />
食指放在4弦第二品上，中指放在3弦第二品上，无名指放在2弦第二品上</p>
<p><img alt="Bm" src="../../../../img/guitar/Bm.png" /><br />
食指大横按放在第二品上，中指放在2弦第三品上，无名指放在4弦第四品上，小指放在3弦第四品上<br />
<img alt="Bm" src="../../../../img/guitar/Bm-1.png" /></p>
<h3 id="_2"><a class="toclink" href="../../../../2025/03/26/%E5%90%89%E4%BB%96%E5%AD%A6%E4%B9%A0/#_2">八个实用的吉他和弦转换技巧</a></h3>
<p>1.压熟要转换的和絃，确保没有杂音
2.找出共通的手指
<img alt="C-Am" src="../../../../img/guitar/C_Am.png" />
3.练习手指移动的速度，先从练习移动低音的手指开始
<img alt="C-F" src="../../../../img/guitar/C_F.png" />
4.相同指型的手指可以一起移动</p>
<h3 id="_3"><a class="toclink" href="../../../../2025/03/26/%E5%90%89%E4%BB%96%E5%AD%A6%E4%B9%A0/#_3">引用</a></h3>
<p>https://www.zhihu.com/tardis/bd/ans/1797295715</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-02-28 00:00:00+00:00">2025年2月28日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="ways-of-generating-compile-command-json-file"><a class="toclink" href="../../../../2025/02/28/ways-of-generating-compile-command-json-file/">ways of generating compile command json file</a></h2>
<p>clangd is programming language server of clang, requires a compile_commands.json file located in source code directory for the best. I recommend intercept-build for generating the file, because it is included in clang-tools package when compiling via make and makefile.</p>
<ul>
<li>intercept-build make -B</li>
<li>bear make -B</li>
<li>compiledb make -B</li>
<li>meson, cmake</li>
<li><a href="https://github.com/Ericsson/codechecker/#Install-guide">codechecker</a></li>
</ul>
<p>or use bash script
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>--always-make<span class="w"> </span>--dry-run<span class="w"> </span><span class="se">\</span>
<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-wE<span class="w"> </span><span class="s1">&#39;gcc|g\+\+&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-w<span class="w"> </span><span class="s1">&#39;\-c&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-nR<span class="w"> </span><span class="s1">&#39;[inputs|{directory:&quot;.&quot;, command:., file: match(&quot; [^ ]+$&quot;).string[1:]}]&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span>&gt;<span class="w"> </span>compile_commands.json
</code></pre></div></p>
<h3 id="reference"><a class="toclink" href="../../../../2025/02/28/ways-of-generating-compile-command-json-file/#reference">reference</a></h3>
<p>https://releases.llvm.org/11.0.1/tools/clang/docs/JSONCompilationDatabase.html
https://gist.github.com/gtors/effe8eef7dbe7052b22a009f3c7fc434
https://stackoverflow.com/questions/21134120/how-to-turn-makefile-into-json-compilation-database</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-02-07 00:00:00+00:00">2025年2月7日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="difference-of-lxc-container-and-docker-container"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/">difference of lxc container and docker container</a></h2>
<ul>
<li>creating a lxc container will alloc a new partition from lvm(a new logic partition), create a root-fs and copy image into it, and the image is a zip file. </li>
<li>creating a docker container will mount docker image layers one by one into the host's fs</li>
</ul>
<h3 id="best-way"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#best-way">best way</a></h3>
<p>best way of running docker in pve is probably install docker inner a lxc container</p>
<h3 id="speed-up-docker-installation"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#speed-up-docker-installation">speed up docker installation</a></h3>
<p>https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/</p>
<h4 id="remove-old"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#remove-old">remove old</a></h4>
<p>for pkg in docker.io docker-doc docker-compose podman-docker containerd runc; do apt-get remove $pkg; done</p>
<h4 id="setup-repository"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#setup-repository">setup repository</a></h4>
<p>apt-get update
apt-get install ca-certificates curl gnupg
install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
echo \
  "deb [arch=<span class="arithmatex">\((dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian \
  "\)</span>(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME")" stable" | \
  tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</p>
<h4 id="install"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#install">install</a></h4>
<p>apt-get update
apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</p>
<h3 id="copy-image-to-another-host"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#copy-image-to-another-host">copy image to another host</a></h3>
<p>docker save <image> | bzip2 | ssh user@host docker load</p>
<h3 id="fix-problem-modprobe-fatal-module-fuse-not-found-in-directory-libmodules6110-1-pve"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#fix-problem-modprobe-fatal-module-fuse-not-found-in-directory-libmodules6110-1-pve">fix problem 'modprobe: FATAL: Module fuse not found in directory /lib/modules/6.1.10-1-pve'</a></h3>
<p>enable the Options of your container (Select the container on the left-hand side &gt; Options &gt; Features) and then enable FUSE</p>
<p><strong><em>warn</em></strong> Just be aware that FUSE in LXC containers can cause some problems (no snapshots, no suspend backup, lower security since there is less containment).</p>
<h3 id="convert-docker-image-to-lxc-image"><a class="toclink" href="../../../../2025/02/07/difference-of-lxc-container-and-docker-container/#convert-docker-image-to-lxc-image">convert docker image to lxc image</a></h3>
<p>https://www.reddit.com/r/Proxmox/comments/u9ru5c/comment/i640ixf/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button</p>
<p>https://gist.github.com/flaki/9a6c58447e50219a9b77a7cd15433896</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-16 00:00:00+00:00">2025年1月16日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="linux"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/">Linux 文本处理三剑客</a></h2>
<p>grep awk sed</p>
<h3 id="sed-vmstatcsv"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#sed-vmstatcsv">sed 将vmstat的输出转成csv</a></h3>
<p>vmstat的输出如下，空格分割的。sed命令<code>sed 's/^  *//;s/  */,/g'  vmstat.dat &gt; vmstat.02.csv</code>做了两件事：
1. 将行首的空格去掉
2. 将其他空格转成','符合csv的格式</p>
<p>多个sed命令用';'分隔，且共用/g命令</p>
<p><div class="highlight"><pre><span></span><code>procs -----------memory---------- ---swap-- -----io---- -system-- -------cpu-------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st gu
 1  0 999208 3603968 353020 8258580    0    0    22   166 1016    2  4  1 94  0  0  0
</code></pre></div>
处理后
<div class="highlight"><pre><span></span><code>procs,-----------memory----------,---swap--,-----io----,-system--,-------cpu-------
r,b,swpd,free,buff,cache,si,so,bi,bo,in,cs,us,sy,id,wa,st,gu
1,0,999208,3603968,353020,8258580,0,0,22,166,1016,2,4,1,94,0,0,0
</code></pre></div></p>
<h3 id="awk"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#awk">awk 遍历</a></h3>
<p>我之前的awk通常用来打印某一列的内容，例如<code>cat vmstat.dat | awk -F' ' '{print $1}'</code> 打印$1第一列, -F设定分隔符。除此之外还能遍历查找。
例如查找'TARGET'
<div class="highlight"><pre><span></span><code>awk<span class="w"> </span><span class="s1">&#39;{for(i=1;i&lt;=NF;i++)if($i==&quot;TARGET&quot;){print &quot;TARGET located at row: &quot; NR &quot; col: &quot; i }}&#39;</span><span class="w"> </span>
</code></pre></div></p>
<p>这里NR表示当前的<code>行</code>， NF代表当前的<code>列</code>。 NR还可以用来指定要处理的行号，例如vmstat中有两个header。例如
1. 只打印第二行的命令是<code>awk '(NR==2){print $0}'</code>
2. 要知道'id'在哪一列，则遍历第二行的每一列数据 <code>awk '(NR==2){for(i=1;i&lt;NF;i++) if($i=="id"){print i}'</code> 会打印'15'
3. 要打印id这列的第一行的值, <code>awk '(NR==2){for(i=1;i&lt;NF;i++) if($i=="id"){getline; print $i}'</code> 会打印'94'</p>
<p>要打印id这列的第N行的值时，就循环调用getline N次。</p>
<h3 id="python-openpyxl-excel"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#python-openpyxl-excel">使用python库 openpyxl 处理excel</a></h3>
<p>体验了 openpyxl, 接口设计非常自然， 功能也非常全， 包括合并格子、字体、颜色。典型用法如下
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">openpyxl</span>


<span class="n">workbook</span> <span class="o">=</span> <span class="n">openpyxl</span><span class="o">.</span><span class="n">load_workbook</span><span class="p">(</span><span class="s1">&#39;output.xlsx&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">workbook</span><span class="o">.</span><span class="n">sheetnames</span><span class="p">)</span>

<span class="n">sheet</span> <span class="o">=</span> <span class="n">workbook</span><span class="p">[</span><span class="s1">&#39;Sheet&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sheet</span><span class="o">.</span><span class="n">max_row</span><span class="p">)</span> <span class="c1">#总行数</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sheet</span><span class="o">.</span><span class="n">max_column</span><span class="p">)</span> <span class="c1">#总列数</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sheet</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span> <span class="c1">#左上角:右下角</span>

<span class="n">cell1</span> <span class="o">=</span> <span class="n">sheet</span><span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cell1</span><span class="o">.</span><span class="n">row</span><span class="p">)</span> <span class="c1">#1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cell1</span><span class="o">.</span><span class="n">column</span><span class="p">)</span> <span class="c1">#A</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cell1</span><span class="o">.</span><span class="n">coordinate</span><span class="p">)</span> <span class="c1">#A1</span>

<span class="c1"># 单元格的内容</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cell1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># 遍历</span>
<span class="c1">#先行后列</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sheet</span><span class="o">.</span><span class="n">iter_rows</span><span class="p">():</span>
  <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">row</span><span class="si">}</span><span class="s2">][</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">column</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1">#先列后行</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sheet</span><span class="o">.</span><span class="n">iter_cols</span><span class="p">():</span>
  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">row</span><span class="si">}</span><span class="s2">][</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">column</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 保存</span>
<span class="n">workbook</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;test.xlsx&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h4 id="_1"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#_1">插入图片</a></h4>
<p>openpyxl还能插入图片，感觉非常棒</p>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">openpyxl</span><span class="w"> </span><span class="kn">import</span> <span class="n">Workbook</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openpyxl.drawing.image</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>

<span class="n">wb</span> <span class="o">=</span> <span class="n">Workbook</span><span class="p">()</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">wb</span><span class="o">.</span><span class="n">active</span>
<span class="n">ws</span><span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;You should see three logos below&#39;</span>

<span class="c1"># create an image</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s1">&#39;logo.png&#39;</span><span class="p">)</span>

<span class="c1"># add to worksheet and anchor next to cells</span>
<span class="n">ws</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="s1">&#39;A1&#39;</span><span class="p">)</span>
<span class="n">wb</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;logo.xlsx&#39;</span><span class="p">)</span>
</code></pre></div>
https://openpyxl.readthedocs.io/en/stable/images.html</p>
<h3 id="xlwings"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#xlwings">xlwings</a></h3>
<p>Currently, xlwings can only run as a remote interpreter on Linux, see: https://docs.xlwings.org/en/stable/remote_interpreter.html
There are plans to add read/write capabilities, but for now you have to use one of OpenPyXL, XlsxWriter, or pyxlsb,</p>
<h3 id="libreoffice"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#libreoffice">Libreoffice</a></h3>
<p>类比Excel使用vba来编程，Libreoffice sheet使用Basic，同时也支持 <a href="https://help.libreoffice.org/latest/lo/text/sbasic/python/python_programming.html?&amp;DbPAR=BASIC&amp;System=UNIX">python</a></p>
<p>在chatgpt帮助下写了个url转图片的BASIC脚本
<div class="highlight"><pre><span></span><code><span class="c1">REM  *****  BASIC  *****</span>
<span class="vg">Option</span><span class="w"> </span><span class="vg">Explicit</span>

<span class="vg">Sub</span><span class="w"> </span><span class="vg">InsertAndResizeImages</span><span class="p">()</span><span class="w">                </span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">oSheet</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Object</span>
<span class="w">    </span><span class="kd">DIM</span><span class="w"> </span><span class="vg">oCell</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">Object</span><span class="w"> </span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">oGraphic</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Object</span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">imageURL</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">String</span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">oSize</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">New</span><span class="w"> </span><span class="vg">com</span><span class="o">.</span><span class="vg">sun</span><span class="o">.</span><span class="vg">star</span><span class="o">.</span><span class="vg">awt</span><span class="o">.</span><span class="vg">Size</span>
<span class="w">      </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">oColumns</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">Object</span>
<span class="w">      </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">oRows</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Object</span>


<span class="w">    </span><span class="vg">oSheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ThisComponent</span><span class="o">.</span><span class="vg">CurrentController</span><span class="o">.</span><span class="vg">getActiveSheet</span><span class="p">()</span>

<span class="w">    </span><span class="vg">oColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oSheet</span><span class="o">.</span><span class="vg">getColumns</span><span class="p">()</span>
<span class="w">    </span><span class="vg">oColumns</span><span class="o">.</span><span class="vg">getByIndex</span><span class="p">(</span><span class="il">0</span><span class="p">)</span><span class="o">.</span><span class="vg">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3200</span>


<span class="w">    </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">160</span>
<span class="w">    </span><span class="vg">Do</span>

<span class="w">        </span><span class="vg">oCell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oSheet</span><span class="o">.</span><span class="vg">getCellByPosition</span><span class="p">(</span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">i</span><span class="p">)</span>
<span class="w">        </span><span class="vg">oRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oSheet</span><span class="o">.</span><span class="vg">getRows</span><span class="p">()</span>
<span class="w">        </span><span class="vg">oRows</span><span class="o">.</span><span class="vg">getByIndex</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="o">.</span><span class="vg">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3200</span>

<span class="w">        </span><span class="vg">imageURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oCell</span><span class="o">.</span><span class="vg">String</span>
<span class="w">        </span><span class="vg">If</span><span class="w"> </span><span class="vg">imageURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="vg">Then</span><span class="w"> </span><span class="vg">Exit</span><span class="w"> </span><span class="vg">Do</span>
<span class="w">        </span><span class="c1">&#39;Debug.Print oCell.String</span>
<span class="w">        </span><span class="c1">&#39;MsgBox imageURL</span>

<span class="w">        </span><span class="vg">On</span><span class="w"> </span><span class="vg">Error</span><span class="w"> </span><span class="vg">GoTo</span><span class="w"> </span><span class="vg">NextImage</span>
<span class="w">        </span><span class="vg">oGraphic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ThisComponent</span><span class="o">.</span><span class="vg">createInstance</span><span class="p">(</span><span class="s2">&quot;com.sun.star.drawing.GraphicObjectShape&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="w">        </span><span class="vg">oGraphic</span><span class="o">.</span><span class="vg">GraphicURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">imageURL</span>
<span class="w">        </span><span class="vg">oGraphic</span><span class="o">.</span><span class="vg">Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oCell</span><span class="o">.</span><span class="vg">Position</span>

<span class="w">        </span><span class="vg">oSheet</span><span class="o">.</span><span class="vg">DrawPage</span><span class="o">.</span><span class="vg">add</span><span class="p">(</span><span class="vg">oGraphic</span><span class="p">)</span>

<span class="w">        </span><span class="vg">oSize</span><span class="o">.</span><span class="vg">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3200</span>
<span class="w">        </span><span class="vg">oSize</span><span class="o">.</span><span class="vg">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3200</span>
<span class="w">        </span><span class="vg">oGraphic</span><span class="o">.</span><span class="vg">Size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">oSize</span>

<span class="w">        </span><span class="vg">Wait</span><span class="w"> </span><span class="il">500</span><span class="w">  </span><span class="c1">&#39; Pauses for 0.5 seconds</span>

<span class="w">    </span><span class="vg">Exit</span><span class="w"> </span><span class="vg">Do</span>
<span class="nl">NextImage:</span>
<span class="w">        </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">    </span><span class="vg">Loop</span>

<span class="vg">End</span><span class="w"> </span><span class="vg">Sub</span>
</code></pre></div></p>
<h4 id="libreoffice-python"><a class="toclink" href="../../../../2025/01/16/linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2/#libreoffice-python">libreoffice 也支持 python</a></h4>
<p>libreoffice 的UNO API是独立于编程语言的，BASIC可以直接用 <code>ThisComponent</code>，而python需要通过'XSCRIPTCONTEXT'来用，获取sheet的BOOK对象方法是<code>doc = XSCRIPTCONTEXT.getDocument()</code></p>
<p>有个Basic和Python的<a href="https://help.libreoffice.org/latest/lo/text/sbasic/guide/read_write_values.html?DbPAR=BASIC#bm_id41582391760114">对比写法</a>，总结是很相似。用python重写BASIC代码就是</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">insert_and_resize_images</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">com.sun.star.awt</span><span class="w"> </span><span class="kn">import</span> <span class="n">Size</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">XSCRIPTCONTEXT</span><span class="o">.</span><span class="n">getDocument</span><span class="p">()</span>
    <span class="n">sheet</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">CurrentController</span><span class="o">.</span><span class="n">ActiveSheet</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="n">getColumns</span><span class="p">()</span>
    <span class="n">columns</span><span class="o">.</span><span class="n">getByIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mi">3200</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">160</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">cell</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="n">getCellByPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="n">getRows</span><span class="p">()</span>
        <span class="n">rows</span><span class="o">.</span><span class="n">getByIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">3200</span>

        <span class="n">image_url</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">String</span>
        <span class="k">if</span> <span class="n">image_url</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">graphic</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createInstance</span><span class="p">(</span><span class="s2">&quot;com.sun.star.drawing.GraphicObjectShape&quot;</span><span class="p">)</span>
            <span class="n">graphic</span><span class="o">.</span><span class="n">GraphicURL</span> <span class="o">=</span> <span class="n">image_url</span>
            <span class="n">graphic</span><span class="o">.</span><span class="n">Position</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">Position</span>

            <span class="n">sheet</span><span class="o">.</span><span class="n">DrawPage</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">graphic</span><span class="p">)</span>

            <span class="n">size</span> <span class="o">=</span> <span class="n">Size</span><span class="p">()</span>
            <span class="n">size</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mi">3200</span>
            <span class="n">size</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">3200</span>
            <span class="n">graphic</span><span class="o">.</span><span class="n">Size</span> <span class="o">=</span> <span class="n">size</span>

            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># 0.5 seconds pause</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># Continue on error</span>

        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>
<p>无论是excel的xlwings还是libreoffice sheet的pyUNO, 都不能独立使用，都要安装套件。 </p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__current">2</span>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../../../../tags/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Tags">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Tags
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../2024/" class="md-footer__link md-footer__link--next" aria-label="下一页: 2024">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                2024
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.tabs.sticky", "navigation.instant", "navigation.instant.progress", "navigation.footer", "toc.follow", "content.code.copy", "content.action.view"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../../js/tex-mml-chtml.js"></script>
      
        <script src="../../../../js/mermaid.min.js"></script>
      
    
  </body>
</html>