
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://energygreek.github.io/notes/page/7/">
      
      
      
        <link rel="next" href="../../tags/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS 订阅" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="已更新内容的 RSS 订阅" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Welcome - Some Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#welcome" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Some Notes" class="md-header__button md-logo" aria-label="Some Notes" data-md-component="logo">
      
  <img src="../../assets/bird.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Some Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Welcome
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="gray" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../tags/" class="md-tabs__link">
        
  
  
    
  
  Tags

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../archive/2025/" class="md-tabs__link">
          
  
  
    
  
  归档

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Some Notes" class="md-nav__button md-logo" aria-label="Some Notes" data-md-component="logo">
      
  <img src="../../assets/bird.png" alt="logo">

    </a>
    Some Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../.." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      语法规则-名词修饰名词
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      容器的命名空间
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cbasic_string" class="md-nav__link">
    <span class="md-ellipsis">
      c++的basic_string优化
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      c++的信号和异常
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      Linux定时器
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-storage" class="md-nav__link">
    <span class="md-ellipsis">
      docker storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      起因
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell" class="md-nav__link">
    <span class="md-ellipsis">
      shell 中文件操作接口
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-sftp-service" class="md-nav__link">
    <span class="md-ellipsis">
      setup sftp service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-arguement-types" class="md-nav__link">
    <span class="md-ellipsis">
      python arguement types
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2022
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      语法规则-名词修饰名词
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      容器的命名空间
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cbasic_string" class="md-nav__link">
    <span class="md-ellipsis">
      c++的basic_string优化
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    <span class="md-ellipsis">
      c++的信号和异常
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      Linux定时器
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-storage" class="md-nav__link">
    <span class="md-ellipsis">
      docker storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      起因
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell" class="md-nav__link">
    <span class="md-ellipsis">
      shell 中文件操作接口
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-sftp-service" class="md-nav__link">
    <span class="md-ellipsis">
      setup sftp service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-arguement-types" class="md-nav__link">
    <span class="md-ellipsis">
      python arguement types
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="welcome">Welcome<a class="headerlink" href="#welcome" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-11-03 00:00:00+00:00">2021年11月3日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="-"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/">语法规则-名词修饰名词</a></h2>
<p>无论书写还是口语，无论英文还是中文，当用名词修饰名词时，就感觉容易找不到主体(subject)  ，但这种用法有很常见，特别是中文。比如电脑/人脑，说明书/漫画书，都是用名词修饰名词，也可以说是造了新（名）词，在英文中有很多名词+名词合成的派生词， 例如bookstore。大家接受这种词因为没有歧义，大家都知道前面的名词是用来修饰后面的词。例如说电脑，大家都知道指“带电的脑”，不会以为指“脑里面的电”。bookstore 则都认为指 store of books(有书的店)，不会认为是 book of stores(有店的书)。</p>
<p>但如果句子比较复杂时，就容易有歧义了。</p>
<h3 id="_1"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/#_1">举例中文</a></h3>
<p>当长一点的句子，有词修饰词的情况时，就会可能有歧义，特别是比较陌生时，不一定能靠语句分析出主体，而熟悉的东西可以靠经验储备来辅助</p>
<p>”新的证据表格“:
1. 新修饰的表格，表格有新旧之分，新表格和表格都用于记录证据
2. 新修饰的证据，证据有新旧之分，表格专门用来记录新证据</p>
<h3 id="_2"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/#_2">举例英文</a></h3>
<p>new evidence table 这里有歧义： 新表格还是新证据？</p>
<p>正确的说法
* new table of evidence， 新表格
* new evidence in the table, 新证据</p>
<h3 id="_3"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/#_3">英文中的名词修饰名词</a></h3>
<p>英文中的名词 </p>
<p><a href="https://en.wikipedia.org/wiki/Noun_adjunct">Noun-adjunct-维基</a>
<a href="https://www.zhihu.com/question/326331521">知乎</a></p>
<h3 id="of"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/#of">多个of 情况</a></h3>
<p><a href="https://ell.stackexchange.com/questions/210865/can-a-noun-be-used-to-describe-another-noun">是不推荐的</a></p>
<h3 id="_4"><a class="toclink" href="../../2021/11/03/%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99-%E5%90%8D%E8%AF%8D%E4%BF%AE%E9%A5%B0%E5%90%8D%E8%AF%8D/#_4">总结</a></h3>
<p>对于英文而言，名词修饰名词的情况比较少见，除非是常用的或者派生词。用“名词 of 名词”是比较合理的。而当多个of时， 虽然语法上没错，但是容易产生歧义，这时需要调整语句结构来消除歧义。中文同理。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-10-14 00:00:00+00:00">2021年10月14日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="../../2021/10/14/%E5%AE%B9%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/">容器的命名空间</a></h2>
<p>容器是利用'cgroup'和'namespace' 实现软件级的虚拟化，产品有lxc和docker。不同与全虚拟化和半虚拟化，这些是硬件辅助的半虚拟化Zen(Zen也有全虚拟化)和全虚拟化kvm <br />
因为容器使用主机内核，不存在特权指令翻译，所以从性能上比较，容器是最高效的，其次是kvm, Zen</p>
<h3 id="cgroupnamespace"><a class="toclink" href="../../2021/10/14/%E5%AE%B9%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/#cgroupnamespace">cgroup和namespace</a></h3>
<p>这两个是容器技术的根基，包括Docker, lxc。实际上docker开始用的lxc，后来用go重新写了libcontainer来实现控制这两个东西<br />
简单来说，cgroup实现对进程组的资源的限制和监控，而namespace如同c++里面类似，实现了进程组之间的隔离</p>
<p>但除此之外, 虚拟化系统时则还需要rootfs支持</p>
<h3 id="lxcdocker"><a class="toclink" href="../../2021/10/14/%E5%AE%B9%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/#lxcdocker">LXC和Docker</a></h3>
<p>lxc代码合入了内核，其原理和Docker非常类似, 不过Docker有比较丰富的全套工具和方便的api   </p>
<h3 id="nsenter"><a class="toclink" href="../../2021/10/14/%E5%AE%B9%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/#nsenter">nsenter命令的使用</a></h3>
<p>容器技术都使用到了namespace, 而nsenter可以操作namespace, 进入容器内部，以下都一docker容器为例  </p>
<p>使用命令, 获取到容器的首进程pid
<div class="highlight"><pre><span></span><code>docker inspect --format &#39;{{.State.Pid}}&#39; containername
3015
</code></pre></div></p>
<p>然后可以使用nsenter来进入容器，如同<code>docker exec</code> 一样
<div class="highlight"><pre><span></span><code>$ pwd
/home/user
$ sudo nsenter -t 3015 -m  pwd
/
</code></pre></div></p>
<p><code>-m</code>表示挂载命名空间，这样就能访问docker里的进程的文件系统，所以能正确打印出容器进程的当前目录<br />
<code>-t</code>表示目标进程，nsenter可以获取以下命名空间。 跟通过执行<code>ls /proc/self/ns</code>所看到的差不多，这里self是命令本身pid
<div class="highlight"><pre><span></span><code>/proc/pid/ns/mnt    the mount namespace
/proc/pid/ns/uts    the UTS namespace
/proc/pid/ns/ipc    the IPC namespace
/proc/pid/ns/net    the network namespace
/proc/pid/ns/pid    the PID namespace
/proc/pid/ns/user   the user namespace
/proc/pid/ns/cgroup the cgroup namespace
/proc/pid/ns/time   the time namespace
/proc/pid/root      the root directory
/proc/pid/cwd       the working directory respectively
</code></pre></div>
上面的每项都有对应的参数，而'-a'表示进入上面的所有命名空间</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-09-22 00:00:00+00:00">2021年9月22日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="cbasic_string"><a class="toclink" href="../../2021/09/22/c%E7%9A%84basic_string%E4%BC%98%E5%8C%96/">c++的basic_string优化</a></h2>
<p>Small-string optimization is basically </p>
<p><div class="highlight"><pre><span></span><code><span class="k">union</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">char</span><span class="p">[</span><span class="mi">23</span><span class="p">];</span><span class="w"> </span><span class="kt">bool</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
- but with bit-tricks instead.
When allocated, the local buffer's space is reused for size and capacity. It's not
wasted.
But gdb just shows both sides of the union, which can be confusing.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-09-16 00:00:00+00:00">2021年9月16日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="c"><a class="toclink" href="../../2021/09/16/c-%E4%BF%A1%E5%8F%B7%E5%92%8C%E5%BC%82%E5%B8%B8/">c++的信号和异常</a></h2>
<p>信号和异常都是c++程序会遇到的，以前常把信号也当异常来看待，当其实两者是截然不同的东西</p>
<h3 id="_1"><a class="toclink" href="../../2021/09/16/c-%E4%BF%A1%E5%8F%B7%E5%92%8C%E5%BC%82%E5%B8%B8/#_1">信号</a></h3>
<p>信号不仅是对c++程序，而是对所有linux程序，是内核<code>在进程由内核态转用户态</code>时，检查信号槽并调用信号处理函数（用户定义或者默认）。<br />
有些信号可以由程序处理（常见退出信号SIGINT），而有些无法处理（常见退出信号SIGABT, 段错误信号SIGSEGV），而大多信号默认是退出进程。</p>
<h3 id="_2"><a class="toclink" href="../../2021/09/16/c-%E4%BF%A1%E5%8F%B7%E5%92%8C%E5%BC%82%E5%B8%B8/#_2">异常</a></h3>
<p>c++的异常是c所没有的，异常一般在出现<code>逻辑错误</code>和<code>运行时错误</code>时要抛出异常，如果没有异常处理函数，则coredump。</p>
<h3 id="_3"><a class="toclink" href="../../2021/09/16/c-%E4%BF%A1%E5%8F%B7%E5%92%8C%E5%BC%82%E5%B8%B8/#_3">触发方式</a></h3>
<p>触发信号用raise，而异常用trow 
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">raise</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sig</span><span class="p">);</span>
</code></pre></div></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-08-24 00:00:00+00:00">2021年8月24日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="linux"><a class="toclink" href="../../2021/08/24/linux%E5%AE%9A%E6%97%B6%E5%99%A8/">Linux定时器</a></h2>
<p>https://www.computerhope.com/unix/ucrontab.htm#command-entries</p>
<h3 id="systemd-run"><a class="toclink" href="../../2021/08/24/linux%E5%AE%9A%E6%97%B6%E5%99%A8/#systemd-run">使用systemd-run 替换</a></h3>
<div class="highlight"><pre><span></span><code># systemd-run --on-active=30 /bin/touch /tmp/foo
# systemd-run --on-active=&quot;12h 30m&quot; --unit some-unit.service
</code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-08-13 00:00:00+00:00">2021年8月13日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-storage"><a class="toclink" href="../../2021/08/13/docker-storage/">docker storage</a></h2>
<p>docker 有3种方式使用系统存储:</p>
<ul>
<li>bind: 
  宿主机目录映射方式，启动容器命令添加参数<code>-v dir1:dir2</code>。将宿主机的目录dir1挂载到容器的dir2目录，实际执行的<code>mount -o bind</code>类似命令</li>
<li>volume: 
  由docker管理的存储，先创建后使用，且可以在多个容器中共享，是官方推荐的方式</li>
<li>tmpfs: 
  使用宿主机的内存作为存储，这种使用内存文件系统来挂载到容器目录, 使用参数<code>--mount type=tmpfs,destination=/dir</code>, tmpfs是退出即释放的一种文件系统</li>
</ul>
<h3 id="docker"><a class="toclink" href="../../2021/08/13/docker-storage/#docker">docker使用的文件系统</a></h3>
<p>docker使用的文件系统经过很多变化，而且在各发行版下可能不同，但目前主流的是overlay2，执行<code>docker info</code> 查看当前使用的是overlay2
<div class="highlight"><pre><span></span><code>sudo docker info | grep  Storage                                                                                                                                              
 Storage Driver: overlay2
</code></pre></div></p>
<p>除了overlay2，还有aufs（ubuntu），devicemapper（centos），btrfs和zfs。他们的实现都不同，都能支持分层和支持写时复制（Cow/copy-on-write），而他们实现的方式有区别，所以效率也有区别</p>
<ul>
<li>分层：
镜像都是分层的，在Dockerfile构建时，每次执行COPY/RUN时，都会增加一层</li>
<li>写时复制:
在容器或者DockerFile执行修改操作时，包括权限修改，会将lower layer 的文件复制到container层再修改</li>
</ul>
<p>而容器就是在镜像顶层<code>压栈</code>了一个<code>可写</code>层，而且是临时的，当容器销毁时，这层的文件也会删除</p>
<h3 id="overlay"><a class="toclink" href="../../2021/08/13/docker-storage/#overlay">overlay的优势</a></h3>
<ol>
<li>page caching， 可以在多个不同实例之间共享</li>
<li>不同层之间，相同文件使用硬连接， 节省inode 和 大小</li>
</ol>
<p>写时复制 copy-up 会导致第一次写时造成延迟，特别是大文件，拷贝起来费时。 但第二次就不会延时， 而且overlay2 有caching， 相比其它文件系统，更减少延时</p>
<h3 id="overlay_1"><a class="toclink" href="../../2021/08/13/docker-storage/#overlay_1">overlay的问题</a></h3>
<ol>
<li>实现不够完全， 例如没有实现uname </li>
<li>先只读打开一个文件 open（read）， 再读写打开相同文件open（write）， 两个fd 会对应2个不同文件， 第一个对应的lower的文件，第二个造成写时复制，对应容器里的文件。 </li>
<li>规避方法是先执行touch 操作。 现实的例子是 yum 需要安装yum-plugin-ovl。 但这个只有7.2才支持， 之前的话就需要先<code>touch /var/lib/rpm/*</code></li>
</ol>
<h3 id="_1"><a class="toclink" href="../../2021/08/13/docker-storage/#_1">最佳实践</a></h3>
<ol>
<li>使用ssd </li>
<li>对于写操作比较多的场景，例如数据库，应使用映射文件(bind)或者volume。这样跳过了overlay的复杂操作，直接使用主机的文件系统</li>
</ol>
<h3 id="overlay_2"><a class="toclink" href="../../2021/08/13/docker-storage/#overlay_2">overlay的增删改</a></h3>
<p>当运行docker容器时查看挂载</p>
<p><div class="highlight"><pre><span></span><code>overlay on /var/lib/docker/overlay2/04ea1faa8074e5862f40eecdba968bd9b7f222cb30e5bf6a0b9a9c48be0940f2/merged type overlay (rw,relatime,lowerdir=/var/lib/docker/overlay2/l/B74PWZCBMRCWXFH5UL2ZXB5WEU:/var/lib/docker/overlay2/l/WNHICVPVSDNUGSCZW435TPSMOK,upperdir=/var/lib/docker/overlay2/04ea1faa8074e5862f40eecdba968bd9b7f222cb30e5bf6a0b9a9c48be0940f2/diff,workdir=/var/lib/docker/overlay2/04ea1faa8074e5862f40eecdba968bd9b7f222cb30e5bf6a0b9a9c48be0940f2/work)
</code></pre></div>
docker 将镜像的文件挂载为只读， 将容器层挂载为可读可写。 文件系统可以分为2部分
upper（容器层） + lower （镜像层）</p>
<ul>
<li>当在容器里执行写时， 如果文件不存在， 会依次遍历lower。如果都不存在就会在upper层创建文件</li>
<li>读也相同</li>
<li>删除时会创建一个without 来隐藏， 这是为什么即使删除容器里的文件， 镜像还是会增大。 </li>
<li>删除目录情况也差不多</li>
</ul>
<h3 id="_2"><a class="toclink" href="../../2021/08/13/docker-storage/#_2">特殊情况</a></h3>
<p>在保存容器后(docker commit)，会多一层，里面包含了修改的文件，以及删除后生成的without文件，然后生成镜像</p>
<p>但对于以下特殊目录文件不会提交， 因为这些文件是运行时docker 要根据用户配置进行修改的。  </p>
<ol>
<li>/etc/hostname </li>
<li>/etc/hosts </li>
<li>/etc/resov.conf</li>
</ol>
<p>例如docker 的link选项，会在容器的hosts 文件里定义对应的容器名-&gt;容器ip</p>
<h3 id="mount-overlayfs"><a class="toclink" href="../../2021/08/13/docker-storage/#mount-overlayfs">手动mount overlayfs的例子</a></h3>
<ol>
<li>原本目录，文件都分散在不同目录ABC
<div class="highlight"><pre><span></span><code>.
├── A
│   ├── aa
│   └── a.txt
├── B
│   ├── a.txt
│   └── b.txt
├── C
│   └── c.txt
└── worker
    └── work [error opening dir]
</code></pre></div></li>
<li>overlay 挂载到/tmp/test目录 <code>sudo mount -t overlay overlay -o lowerdir=A:B,upperdir=C,workdir=worker /tmp/test/</code></li>
<li>查看test目录 
<div class="highlight"><pre><span></span><code>/tmp/test/
├── aa
├── a.txt
├── b.txt
└── c.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>mount  | grep &#39;overlay&#39;
overlay on /tmp/test type overlay (rw,relatime,lowerdir=A:B,upperdir=C,workdir=worker)
</code></pre></div></li>
</ol>
<h3 id="_3"><a class="toclink" href="../../2021/08/13/docker-storage/#_3">参考</a></h3>
<p>https://docs.docker.com/storage/storagedriver/</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-08-02 00:00:00+00:00">2021年8月2日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="../../2021/08/02/%E8%BE%93%E5%87%BA%E7%BC%93%E5%86%B2%E5%92%8Cstdbuf/">起因</a></h2>
<p>遇到过一个面试题, 以下程序打印几个'A'
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">fork</span><span class="p">();</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
答案是4个,而以下是3个
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;A</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">fork</span><span class="p">();</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
再把上面的编译后的可执行文件重定向到文件, 则有4个'A'
<div class="highlight"><pre><span></span><code><span class="cp">#./a.out &gt; r.log</span>
<span class="cp">#cat r.log</span>
</code></pre></div>
原因就是缓冲 </p>
<h3 id="linux"><a class="toclink" href="../../2021/08/02/%E8%BE%93%E5%87%BA%E7%BC%93%E5%86%B2%E5%92%8Cstdbuf/#linux">Linux 缓冲介绍</a></h3>
<p>分为无缓冲、行缓冲和全缓冲</p>
<h3 id="_2"><a class="toclink" href="../../2021/08/02/%E8%BE%93%E5%87%BA%E7%BC%93%E5%86%B2%E5%92%8Cstdbuf/#_2">演示</a></h3>
<p>发现有些程序可以输出到屏幕，重定向到文件后，执行<code>ctl+c</code>退出后却没有任何内容，例如以下</p>
<p><div class="highlight"><pre><span></span><code>#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

int main(void) {
  while (1) {
    printf(&quot;Hello World\n&quot;);
    sleep(1);
  }
}
</code></pre></div>
这个程序是死循环所以需要手动结束，且一直打印helloword。但如果将输出重定向到文件，</p>
<p><div class="highlight"><pre><span></span><code>#./a.out &gt; r.log
</code></pre></div>
当手动退出时，文件依旧是空的</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-07-07 00:00:00+00:00">2021年7月7日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="shell"><a class="toclink" href="../../2021/07/07/shell-%E4%B8%AD%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%8E%A5%E5%8F%A3/">shell 中文件操作接口</a></h2>
<h3 id="_1"><a class="toclink" href="../../2021/07/07/shell-%E4%B8%AD%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%8E%A5%E5%8F%A3/#_1">读行</a></h3>
<div class="highlight"><pre><span></span><code>while read line ;do
#or while read -r line ;do
echo $line
done &lt; $1
</code></pre></div>
<div class="highlight"><pre><span></span><code>cat $1 | while read line ;do
echo $line
done
</code></pre></div>
<p>使用for时，结果略有不同, for以空格为一行
<div class="highlight"><pre><span></span><code>for line in $(cat $1) ;do
echo $line
done
</code></pre></div></p>
<h3 id="reference"><a class="toclink" href="../../2021/07/07/shell-%E4%B8%AD%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%8E%A5%E5%8F%A3/#reference">reference</a></h3>
<p>https://bash.cyberciti.biz/guide/Reads_from_the_file_descriptor_(fd)</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-06-25 00:00:00+00:00">2021年6月25日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setup-sftp-service"><a class="toclink" href="../../2021/06/25/setup-sftp-service/">setup sftp service</a></h2>
<h3 id="curlfs-sshfs"><a class="toclink" href="../../2021/06/25/setup-sftp-service/#curlfs-sshfs">curlfs 和 sshfs 客户端</a></h3>
<p>在debian上，之前一直用curlfs工具，将远程目录mount到本地目录。系统升级之后发现这个包没有了， 原来因为ftp不安全，所以现在推荐sshfs。</p>
<h3 id="reference"><a class="toclink" href="../../2021/06/25/setup-sftp-service/#reference">reference</a></h3>
<p>https://www.linuxtechi.com/configure-sftp-chroot-debian10/</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-06-18 10:44:05+00:00">2021年6月18日</time></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="python-arguement-types"><a class="toclink" href="../../2021/06/18/python-arguement-types/">python arguement types</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># accept tupe and list</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calc</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">n</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>

<span class="n">calc</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">calc</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># accept varidict argument</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calc2</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">n</span>
    <span class="k">return</span> <span class="nb">sum</span>

<span class="n">calc2</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">calc2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="c1"># transform list to varidcit argument</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">))</span>


<span class="c1"># varidict named arguments will be transformed to dict</span>

<span class="c1"># only accept named varidict argument</span>
<span class="k">def</span><span class="w"> </span><span class="nf">person2</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">if</span> <span class="s1">&#39;hello&#39;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
        <span class="n">passs</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">kw</span><span class="p">)</span>

<span class="c1"># accept compose argument in sequence: normal argument &amp; named varidict argument</span>
<span class="k">def</span><span class="w"> </span><span class="nf">person</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

<span class="n">person</span><span class="p">(</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
<span class="n">person</span><span class="p">(</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">&#39;sh&#39;</span><span class="p">)</span>
<span class="n">person</span><span class="p">(</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="n">birth</span><span class="o">=</span><span class="mi">1990</span><span class="p">)</span>
<span class="n">person2</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span><span class="n">age</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="n">birth</span><span class="o">=</span><span class="mi">1990</span><span class="p">)</span>

<span class="c1"># compose normal type argument, varidict type argument, and varidict named type argument </span>
<span class="k">def</span><span class="w"> </span><span class="nf">f2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">d</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a =&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s1">&#39;b =&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c =&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;d =&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="s1">&#39;kw =&#39;</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

<span class="n">cs</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">f2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">*</span><span class="n">cs</span><span class="p">,</span><span class="n">hello</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>


<span class="c1"># use * to sepcify named type argument</span>
<span class="k">def</span><span class="w"> </span><span class="nf">f3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a =&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s1">&#39;b =&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c =&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;d =&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="s1">&#39;e =&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="c1"># don&#39;t accept other named argument</span>
<span class="n">f3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">e</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># use tupe and dict can call all kind of function</span>
<span class="c1"># so *arg and **kw are always used to forward all argument to another function of any type of argument</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">f2</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

<span class="c1"># at last, use base type for default value</span>
</code></pre></div>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../..">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../5/">5</a> <a class="md-pagination__link" href="../6/">6</a> <span class="md-pagination__current">7</span> <a class="md-pagination__link" href="../8/">8</a> <a class="md-pagination__link" href="../9/">9</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../13/">13</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
        
          
          <a href="../../tags/" class="md-footer__link md-footer__link--next" aria-label="下一页: Tags">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Tags
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.tabs.sticky", "navigation.instant", "navigation.instant.progress", "navigation.footer", "toc.follow", "content.code.copy", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/tex-mml-chtml.js"></script>
      
        <script src="../../js/mermaid.min.js"></script>
      
    
  </body>
</html>